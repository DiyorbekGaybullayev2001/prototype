<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/image/logo.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap"
        rel="stylesheet">
    <link href="../style.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Профиль</title>
    <style>
        #closeDeleteModal{
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 28px;
            color: #000;
            cursor: pointer;
        }
        #logoutBtn, #deleteAccountBtn, .edit{
            width: 32%;
        }
        #confirmDeleteBtn{
            background-color: #EDDA9F;
            
        }
        .info-label{
            color: #888;
            font-size: 14px !important;
        }
        #deleteAccountModal, #logoutModal{
            background: #000000d5 !important;
        }
        .closeLogModal{
            position: relative !important;
        }
        .closeLogoutModall {
    position: absolute !important;
    top: 10px !important;
    right: 10px !important;
    background: none !important;
    border: none !important;
    font-size: 28px !important;
    color: #000 !important;
    cursor: pointer !important; 
    z-index: 10 !important;
}
     #profileName{
        font-size: 25px !important;
     }   
    </style>
</head>

<body class="bg-[#F2F2F2]">
    <div class="wrapper max-w-7xl mt-0 mx-auto pb-[20px] p-[0_15px]">
        <header class="flex justify-between mt-[46px]">
            <div class="header__left flex items-center gap-[25px]">
                <button
                    class="back bg-white-important py-[20px] px-[12px] rounded-[48px] flex justify-center align-center"
                    onclick="window.history.back(); return false;">
                    <img src="/image/arrow-l.svg" alt="">
                </button>
<a href="/pages/chats.html"
    class="bg-2B2E3A flex items-center gap-[10px] justify-between  rounded-[48px] font-bold text-[25px] leading-[34.1px] text-center text-white px-[55px] py-[12px] max-[900px]:hidden">
    Чаты <span class="w-[40px] h-[40px] p-[6px_14px] rounded-[90px] bg-[#A0ED9F] flex items-center justify-center text-black text-[16px]">5</span>
    </a>
                <a href="/pages/chats.html"
                    class="hidden bg-2B2E3A rounded-[68px] font-bold text-[25px] leading-[34.1px] text-center text-white px-[18px] py-[18px] max-[900px]:flex">
                    <img src="/image/message-ico.svg" class="w-[25px]" alt="">
                </a>
            </div>
            <div class="flex items-center gap-[25px]">
                <a href="/pages/tutorial.html"
                    class="bg-2B2E3A rounded-[48px] font-bold text-[25px] leading-[34.1px] text-center text-white px-[55px] py-[12px] max-[900px]:hidden">
                    Обучение
                </a>
                <a href="/pages/tutorial.html"
                    class="hidden bg-2B2E3A rounded-[68px] font-bold text-[25px] leading-[34.1px] text-center text-white px-[18px] py-[20px] max-[900px]:flex">
                    <img src="/image/tutorial.svg" class="w-[30px]" alt="">
                </a>
                <a href="/pages/subscription.html"
                    class="bg-2B2E3A rounded-[48px] font-bold text-[25px] leading-[34.1px] text-center text-white px-[55px] py-[12px] max-[500px]:text-[20px] max-[500px]:px-[35px] max-[420px]:text-[18px] max-[420px]:px-[30px]">
                    Тариф
                </a>
            </div>
        </header>
        <main class="flex flex-col">
            <div class=" rounded-3xl bg-white p-[50px] pr-[30px] pb-[25px] mb-[40px] max-[600px]:p-[30px] max-[450px]:p-[20px]">

                <div class="flex items-center gap-[30px] mb-[56px] max-[500px]:gap-[20px] max-[450px]:gap-[10px]">
                    <div class="relative w-[70px] h-[70px]">
                        <label for="avatar-upload" class="absolute inset-0 cursor-pointer avatar-overlay hidden">
                            <div class="absolute inset-0 bg-[#0000007c]  flex items-center justify-center rounded-full">
                                <img src="/image/update-img.svg" alt="Upload">
                            </div>
                        </label>
                        <input type="file" id="avatar-upload" accept="image/*"
                            class="absolute mr-[10px] inset-0 opacity-0 cursor-pointer">
                        <img id="profileImage" src="/image/avatar.png" alt="" class="min-w-[70px] h-[70px] rounded-full">
                    </div>
                    <div class="relative w-[400px]">
        <input id="profileName" type="text"
            class="!font-bold w-full  leading-[34.1px] tracking-normal text-[#454545] border-none bg-transparent py-[10px] px-[20px] max-[600px]:text-[20px]"
            value="Иванов Иван Иванович" disabled>
        <img id="profileNameEditIcon" src="/image/pen.svg" alt="edit" class="edit-icon hidden absolute top-3 right-3 cursor-pointer">
    </div>
                </div>

                <div id="info"
                    class="grid grid-cols-3 gap-[20px] mb-[75px] max-[950px]:grid-cols-2 max-[650px]:grid-cols-1">
                    <div class="info-item relative">
        <span class="info-label block text-[#888] mb-1 font-bold">Страна:</span>
        <h2 class="flex items-center gap-[46px] font-semibold text-[16px] leading-[30px] tracking-[1px] text-black py-[10px] px-[20px]">
            <span class="flex w-[17px] h-[17px] bg-[#595959] rounded-full"></span>
            <span class="info-text">Москва</span>
        </h2>
        <input type="text" value="Москва"
            class="info-input hidden absolute left-[46px] top-0 border py-[10px] px-[20px] rounded-lg w-[calc(100%-46px)]">
        <img src="/image/pen.svg" alt="edit" class="edit-icon hidden absolute top-3 right-3">
    </div>
    <div class="info-item relative">
        <span class="info-label block text-[#888] mb-1 font-bold">Тел:</span>
        <h2 class="flex items-center gap-[46px] font-semibold text-[16px] leading-[30px] tracking-[1px] text-black py-[10px] px-[20px]">
            <span class="flex w-[17px] h-[17px] bg-[#595959] border-[#E2E2E2] rounded-[15px] rounded-full"></span>
            <span class="info-text">+7 (999) 999-99-99</span>
        </h2>
        <input type="phone" value="+7 (999) 999-99-99"
            class="info-input hidden absolute left-[46px] top-0 border py-[10px] px-[20px] rounded-lg w-[calc(100%-46px)]">
        <img src="/image/pen.svg" alt="edit" class="edit-icon hidden absolute top-3 right-3">
    </div>
    <div class="info-item relative">
        <span class="info-label block text-[#888] mb-1 font-bold" >Телеграм:</span>
        <h2 class="flex items-center gap-[46px] font-semibold text-[16px] leading-[30px] tracking-[1px] text-black py-[10px] px-[20px]">
            <span class="flex w-[17px] h-[17px] bg-[#595959] rounded-full"></span>
            <span class="info-text">@nickname</span>
        </h2>
        <input type="text" value="@nickname"
            class="info-input hidden absolute left-[46px] top-0 border py-[10px] px-[20px] rounded-lg w-[calc(100%-46px)]">
        <img src="/image/pen.svg" alt="edit" class="edit-icon hidden absolute top-3 right-3">
    </div>
    <div class="info-item relative">
        <span class="info-label block text-[#888] mb-1 font-bold">Время:</span>
        <h2 class="flex items-center gap-[46px] font-semibold text-[16px] leading-[30px] tracking-[1px] text-black py-[10px] px-[20px]">
            <span class="flex w-[17px] h-[17px] bg-[#595959] rounded-full"></span>
            <span class="info-text">GMT +4</span>
        </h2>
        <input type="text" value="GMT +4"
            class="info-input hidden absolute left-[46px] top-0 border py-[10px] px-[20px] rounded-lg w-[calc(100%-46px)]">
        <img src="/image/pen.svg" alt="edit" class="edit-icon hidden absolute top-3 right-3">
    </div>
    <div class="info-item relative">
        <span class="info-label block text-[#888] mb-1 font-bold">Почта:</span>
        <h2 class="flex items-center gap-[46px] font-semibold text-[16px] leading-[30px] tracking-[1px] text-black py-[10px] px-[20px]">
            <span class="flex w-[17px] h-[17px] bg-[#595959] rounded-full"></span>
            <span class="info-text">test@gmail.com</span>
        </h2>
        <input type="email" value="test@gmail.com"
            class="info-input hidden absolute left-[46px] top-0 border py-[10px] px-[20px] rounded-lg w-[calc(100%-46px)]">
        <img src="/image/pen.svg" alt="edit" class="edit-icon hidden absolute top-3 right-3">
    </div>
                </div>
                
                <button id="editProfileButton"
                    class=" border-btn-2 log-in__btn flex items-center justify-center bg-yellow-300 rounded-[48px] py-5 px-[54px] text-center font-bold text-[25px] leading-[34.1px] border-2 border-transparent ml-auto max-[650px]:hidden">
                    Редактировать профиль
                </button>
                <button id="editProfileButton"
                class="hidden mx-auto border-btn-2 log-in__btn flex items-center justify-center bg-yellow-300 rounded-[48px] py-5 px-[54px] text-center font-bold text-[25px] leading-[34.1px] border-2 border-transparent max-[650px]:flex max-[650px]:px-[34px] max-[650px]:py-3 max-[650px]:text-[20px] max-[450px]:text-[18px] ">
                Редактировать профиль
            </button>
            </div>
            <div class="flex w-full gap-[20px] flex-wrap  max-[650px]:gap-[20px] ">
                <a href="#" id="deleteAccountBtn" class="w-[33%]">
                    <div class="bg-white p-5 h-[222px] w-full rounded-[30px] flex flex-col justify-between max-[500px]:h-[192px]">
                        <h3 class="font-semibold text-[25px] leading-[40.92px] text-[#313131] max-[450px]:text-[18px]">Удалить аккаунт</h3>
                        <p class="bg-[#EDDA9F] rounded-[65px] ml-auto w-[60px] h-[60px] flex items-center justify-center">
                            <img src="/image/arrow-smaller.svg" alt="">
                        </p>
                    </div>
                </a>
                <a href="./editpassword.html" class="edit w-[33%] ">
                    <div class="bg-white p-5 h-[222px] w-full rounded-[30px] flex flex-col justify-between max-[500px]:h-[192px]">
                        <h3 class="font-semibold text-[25px] leading-[40.92px] text-[#313131] max-[450px]:text-[18px]">Изменить пароль</h3>
                        <p class="bg-[#EDDA9F] rounded-[65px] ml-auto w-[60px] h-[60px] flex items-center justify-center">
                            <img src="/image/arrow-smaller.svg" alt="">
                        </p>
                    </div>
                </a>
                <!-- Новая кнопка "Выйти" -->
                <a href="#" id="logoutBtn" class="w-[30%]">
                    <div class="bg-white p-5 h-[222px] w-full rounded-[30px] flex flex-col justify-between max-[500px]:h-[192px]">
                        <h3 class="font-semibold text-[25px] leading-[40.92px] text-[#313131] max-[450px]:text-[18px]">Выйти</h3>
                        <p class="bg-[#EDDA9F] rounded-[65px] ml-auto w-[60px] h-[60px] flex items-center justify-center">
                            <img src="/image/arrow-smaller.svg" alt="">
                        </p>
                    </div>
                </a>
            </div>
        </main>
    </div>

     <!-- Модальное окно для удаления аккаунта -->
<div id="deleteAccountModal" class="fixed inset-0 z-50 bg-black  bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white rounded-[30px] max-w-[420px] p-[50px] relative shadow-xl flex flex-col items-center">
        <!-- Крестик -->
        <button id="closeDeleteModal" class=" text-right float-end text-gray-400 hover:text-black text-4xl font-bold" aria-label="Закрыть">&times;</button>
        <!-- Текст -->
        <div id="deleteModalText" class="text-center mb-8 text-[16px] text-[#232532] font-medium leading-[1.5]">
            При удалении аккаунта все данные будут стерты, восстановить аккаунт после удаления невозможно.<br>
            Если не согласны, то закройте данное окно.
        </div>
        <!-- Кнопка удалить -->
        <button id="confirmDeleteBtn"
            class="bg-red-500 hover:bg-red-600 text-black font-bold py-3 px-8 rounded-[20px] text-[18px] transition">
            Удалить аккаунт
        </button>
    </div>
</div>

<!-- Модальное окно для выхода из системы -->
<div id="logoutModal" class="fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="closeLogModal bg-white rounded-[30px] max-w-[420px] p-[50px] !relative shadow-xl flex flex-col items-center">
        <!-- Крестик -->
        <button id="closeLogoutModal" class="closeLogoutModall text-right float-end text-gray-400 hover:text-black text-4xl font-bold" aria-label="Закрыть">&times;</button>
        <!-- Текст -->
        <div class="text-center mb-8 text-[16px] text-[#232532] font-medium leading-[1.5]">
            Вы уверены, что хотите выйти из системы?
        </div>
        <!-- Кнопка выйти -->
        <button id="confirmLogoutBtn"
            class="bg-[#2B2E3A] hover:bg-[#232532] text-white font-bold py-3 px-8 rounded-[20px] text-[18px] transition">
            Выйти из системы
        </button>
    </div>
</div>

<script>
    // Открытие модального окна
    document.getElementById('deleteAccountBtn').onclick = function(e) {
        e.preventDefault();
        document.getElementById('deleteAccountModal').classList.remove('hidden');
        document.getElementById('deleteModalText').innerHTML =
            'При удалении аккаунта все данные будут стерты, восстановить аккаунт после удаления невозможно.<br>Если не согласны, то закройте данное окно.';
        document.getElementById('confirmDeleteBtn').style.display = 'block';
    };

    // Закрытие по крестику или клику вне окна
    document.getElementById('closeDeleteModal').onclick = function() {
        document.getElementById('deleteAccountModal').classList.add('hidden');
    };
    document.getElementById('deleteAccountModal').onclick = function(e) {
        if (e.target === this) this.classList.add('hidden');
    };

    // После нажатия "Удалить аккаунт" — меняем текст и скрываем кнопку
    document.getElementById('confirmDeleteBtn').onclick = function() {
        document.getElementById('deleteModalText').innerText =
            'Ваши данные будут удалены после подтверждения';
        this.style.display = 'none';

        // "OK" tugmasini yaratamiz (agar hali yo'q bo'lsa)
        if (!document.getElementById('okAfterDeleteBtn')) {
            let okBtn = document.createElement('button');
            okBtn.innerText = 'OK';
            okBtn.id = 'okAfterDeleteBtn';
            okBtn.className = 'bg-[#EDDA9F] hover:bg-yellow-300 text-black font-bold py-3 px-8 rounded-[20px] text-[18px] mt-6 transition';
            okBtn.onclick = function() {
                window.location.href = "/pages/login.html";
            };
            document.querySelector('#deleteAccountModal .bg-white').appendChild(okBtn);
        }
    };

    // "X" tugmasi yoki modal fonini bosganda OK tugmasini ham olib tashlash
    document.getElementById('closeDeleteModal').onclick = function() {
        document.getElementById('deleteAccountModal').classList.add('hidden');
        const okBtn = document.getElementById('okAfterDeleteBtn');
        if (okBtn) okBtn.remove();
    };
    document.getElementById('deleteAccountModal').onclick = function(e) {
        if (e.target === this) {
            this.classList.add('hidden');
            const okBtn = document.getElementById('okAfterDeleteBtn');
            if (okBtn) okBtn.remove();
        }
    };

    // Открытие модального окна выхода
    document.getElementById('logoutBtn').onclick = function(e) {
        e.preventDefault();
        document.getElementById('logoutModal').classList.remove('hidden');
    };

    // Закрытие по крестику или клику вне окна
    document.getElementById('closeLogoutModal').onclick = function() {
        document.getElementById('logoutModal').classList.add('hidden');
    };
    document.getElementById('logoutModal').onclick = function(e) {
        if (e.target === this) this.classList.add('hidden');
    };

    // Выйти из системы — редирект на страницу входа
    document.getElementById('confirmLogoutBtn').onclick = function() {
        window.location.href = "/pages/login.html";
    };

    // Редактировать профиль tugmasi bosilganda label'larni yashirish
    document.querySelectorAll('#editProfileButton').forEach(btn => {
        btn.addEventListener('click', function () {
            document.querySelectorAll('.info-label').forEach(label => {
                label.style.display = 'none';
            });
            // Edit rejimi uchun class qo'shamiz
            document.body.classList.add('editing-profile');
        });
    });

    // Edit rejimi bosilganda profileName uchun qalamcha ko‘rsatish
    document.querySelectorAll('#editProfileButton').forEach(btn => {
        btn.addEventListener('click', function () {
            document.querySelectorAll('.info-label').forEach(label => {
                label.style.display = 'none';
            });
            document.body.classList.add('editing-profile');
            // Qalamchani ko‘rsatish
            const pnEditIcon = document.getElementById('profileNameEditIcon');
            if (pnEditIcon) pnEditIcon.classList.remove('hidden');
        });
    });

    // Tahrirlashdan chiqishda label'larni qayta ko'rsatish
    function showLabelsAgain() {
        document.querySelectorAll('.info-label').forEach(label => {
            label.style.display = '';
        });
        document.body.classList.remove('editing-profile');
        // Qalamchani yashirish
        const pnEditIcon = document.getElementById('profileNameEditIcon');
        if (pnEditIcon) pnEditIcon.classList.add('hidden');
    }

    // Qalamchaga bosilganda inputni aktiv qilish
    const profileNameInput = document.getElementById('profileName');
    const profileNameEditIcon = document.getElementById('profileNameEditIcon');
    if (profileNameEditIcon && profileNameInput) {
        profileNameEditIcon.addEventListener('click', function (e) {
            e.stopPropagation();
            profileNameInput.disabled = false;
            profileNameInput.focus();
        });
    }

    // Har bir .edit-icon (karandash) va info-text uchun bir xil tahrirlash logikasi
document.querySelectorAll('.info-item').forEach((item, idx) => {
    const editIcon = item.querySelector('.edit-icon');
    const infoText = item.querySelector('.info-text');
    const infoInput = item.querySelector('.info-input');

    // Karandashga bosganda input ochiladi va fokuslanadi
    if (editIcon && infoInput && infoText) {
        editIcon.addEventListener('click', function (e) {
            e.stopPropagation();
            infoText.classList.add('hidden');
            infoInput.classList.remove('hidden');
            infoInput.disabled = false;
            infoInput.focus();
        });
    }

    // InfoText'ga bosganda ham input ochiladi va fokuslanadi
    if (infoText && infoInput) {
        infoText.addEventListener('click', function (e) {
            e.stopPropagation();
            infoText.classList.add('hidden');
            infoInput.classList.remove('hidden');
            infoInput.disabled = false;
            infoInput.focus();
        });
    }
});

document.querySelectorAll('#editProfileButton').forEach(btn => {
    btn.addEventListener('click', function () {
        document.querySelectorAll('.info-label').forEach(label => {
            label.style.display = 'none';
        });
        document.body.classList.add('editing-profile');
        // Qalamchani ko‘rsatish
        const pnEditIcon = document.getElementById('profileNameEditIcon');
        if (pnEditIcon) pnEditIcon.classList.remove('hidden');
        // Borderni ko‘rsatish
        const pnInput = document.getElementById('profileName');
        if (pnInput) {
            pnInput.style.border = '1px solid #e2e2e2';
            pnInput.style.borderRadius = '12px';
            pnInput.style.background = '#fff';
        }
    });
});

// Tahrirlashdan chiqishda borderni yashirish
function showLabelsAgain() {
    document.querySelectorAll('.info-label').forEach(label => {
        label.style.display = '';
    });
    document.body.classList.remove('editing-profile');
    // Qalamchani yashirish
    const pnEditIcon = document.getElementById('profileNameEditIcon');
    if (pnEditIcon) pnEditIcon.classList.add('hidden');
    // Borderni yashirish va inputni disable qilish
    const pnInput = document.getElementById('profileName');
    if (pnInput) {
        pnInput.style.border = 'none';
        pnInput.style.background = 'transparent';
        pnInput.disabled = true;
    }
}
showLabelsAgain()

document.getElementById('profileName').addEventListener('blur', function() {
    showLabelsAgain();
});



</script>




    <script src="/main.js"></script>

   
</body>

</html>